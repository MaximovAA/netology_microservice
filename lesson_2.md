
# Домашнее задание к занятию «Микросервисы: принципы»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

## Ответ

| API Gateway              | Маршрутизация | Проверка auth | Терминация HTTPS |
|--------------------------|-----------------------|-------------------------|------------------|
| Amazon API Gateway       | Есть                  | Есть                    | Есть             |
| Kong                     | Есть                  | Есть                    | Есть             |
| Apigee                   | Есть                  | Есть                    | Есть             |
| Yandex API Gateway       | Есть                  | Есть                    | Есть             |
| NGINX Plus               | Есть                  | Есть                    | Есть             |
| Spring WebFlux           | Есть                  | Есть                    | Есть             |
| haproxy                  | Есть                  | Есть                    | Есть             |
| traefik                  | Есть                  | Есть                    | Есть             |

Все перечисленные сервисы отвечают указанным требованиям, и могут быть использованы в проекте.

Но в целом из них можно выделить Kong.

```
Kong является платформой с открытым исходным кодом, может легко масштабироваться для обработки высокой нагрузки, предлагает широкий набор функций API gateway, включая маршрутизацию запросов, проверку аутентификации и терминацию HTTPS.
Он также обеспечивает управление трафиком, мониторинг, логирование и другие возможности, которые могут быть важными для разработки и эксплуатации вашей системы.
Обеспечивает доступ к обширной документации, руководствам и форумам для получения поддержки и решения возникающих вопросов.
```

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

## Ответ

| Брокер сообщений       | Поддержка кластеризации | Хранение сообщений на диске | Высокая скорость работы | Поддержка форматов сообщений | Разделение прав доступа | Простота эксплуатации |
|------------------------|-------------------------|----------------------------|-------------------------|------------------------------|-------------------------|----------------------|
| Apache Kafka           | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| RabbitMQ               | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| Apache ActiveMQ        | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| NATS Streaming         | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| Google Cloud Pub/Sub   | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| Apache Pulsar          | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |

В качестве популярных наверное стоит выделить Apache Kafka
```
Хотя стоит отметить, что под конкретные задачи можно использовать разные брокеры.
К примеру RabbitMQ подустарел, а например NATS неплохо себя показывает на высокой нагрузке. mosquitto может быть удобен в работе с сертификатами и имеет набор графических приложений.
```

